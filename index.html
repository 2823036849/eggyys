ColorOS ä¾¿ç­¾

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è›‹ä»”é€ƒç”Ÿï¼ˆæœ€ç»ˆå®Œç¾ç‰ˆï¼‰</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #1a1a1a; display: flex; justify-content: center; align-items: center; min-height: 100vh; overflow: hidden; }
 
        #game-container {
            position: relative; width: 900px; height: 600px;
            background: url("./images/bg.png") no-repeat center;
            background-size: cover; border: 6px solid #ff6b00; border-radius: 10px;
        }
        /* æ°›å›´å…ƒç´  */
        .pumpkin {
            position: absolute; width: 40px; height: 60px;
            background: url("./images/pumpkin.png") no-repeat; background-size: cover;
            z-index: 4; animation: flash 2s infinite alternate;
        }
        #pumpkin1 { top: 80px; left: 100px; }
        #pumpkin2 { top: 120px; left: 750px; }
        @keyframes flash {
            0% { filter: brightness(0.8) drop-shadow(0 0 10px #ffd700); }
            100% { filter: brightness(1.5) drop-shadow(0 0 20px #ffb800); }
        }
        .bat {
            position: absolute; width: 30px; height: 20px;
            background: url("./images/bat.png") no-repeat; background-size: cover;
            z-index: 4; animation: fly 2s infinite linear;
        }
        #bat1 { top: 150px; left: -30px; }
        #bat2 { top: 250px; left: 930px; transform: scaleX(-1); animation-delay: 0.8s; }
        #bat3 { top: 400px; left: -30px; animation-delay: 1.5s; }
        @keyframes fly { 0% { left: -30px; } 100% { left: 930px; } }
        #bat2 { animation-name: flyReverse; }
        @keyframes flyReverse { 0% { left: 930px; } 100% { left: -30px; } }
        /* è›‹ä»”ï¼ˆåœ†å½¢+ç¼©å°ï¼‰ */
        #egg {
            position: absolute; width: 38px; height: 38px;
            background: url("./images/egg.png") no-repeat; background-size: cover;
            bottom: 30px; left: 50px; z-index: 10;
            border-radius: 50%; box-shadow: 0 0 8px rgba(255, 255, 255, 0.8);
            /* ç¡®ä¿å®šä½åŸºäºgame-container */
            transform: translate(0, 0);
        }
        /* å± å¤« */
        #saw-butcher {
            position: absolute; width: 30px; height: 40px;
            background: url("./images/butcher.png") no-repeat; background-size: cover;
            left: 450px; top: 300px; z-index: 5;
            transform: translate(0, 0);
        }
        #saw-blade {
            position: absolute; width: 18px; height: 18px;
            background: url("./images/blade.png") no-repeat; background-size: cover;
            top: 10px; right: -5px; animation: rotate 0.08s infinite linear;
        }
        @keyframes rotate { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        /* é€ƒç”Ÿé—¨ */
        #exit-door {
            position: absolute; width: 48px; height: 72px;
            background: url("./images/door.png") no-repeat; background-size: cover;
            right: 66px; top: 264px; z-index: 3;
        }
        /* æ“ä½œæŒ‰é”® */
        #controls {
            position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);
            display: grid; grid-template-columns: repeat(3, 70px); gap: 10px; z-index: 20;
        }
        .btn {
            width: 70px; height: 70px; background: rgba(0,0,0,0.7);
            border: 3px solid #ff6b00; border-radius: 50%; color: #ffd700;
            font-size: 24px; cursor: pointer; display: flex; justify-content: center; align-items: center;
            -webkit-tap-highlight-color: transparent; /* ç§»åŠ¨ç«¯å»é™¤ç‚¹å‡»é«˜äº® */
        }
        .btn:active {
            background: rgba(255, 107, 0, 0.5); /* ç‚¹å‡»åé¦ˆ */
        }
        #up { grid-column: 2 / 3; }
        #left { grid-column: 1 / 2; grid-row: 2 / 3; }
        #down { grid-column: 2 / 3; grid-row: 2 / 3; }
        #right { grid-column: 3 / 4; grid-row: 2 / 3; }
        /* å†æ¥ä¸€æ¬¡å¼¹çª—ï¼ˆç»Ÿä¸€æ ·å¼ï¼‰ */
        #restart-popup {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 350px; height: 200px; background: rgba(0,0,0,0.9);
            border: 4px solid #ff6b00; border-radius: 15px; z-index: 100;
            display: none; flex-direction: column; justify-content: center; align-items: center;
            color: #ffd700; font-size: 28px; text-align: center; padding: 20px;
            box-shadow: 0 0 20px rgba(255, 107, 0, 0.8);
        }
        #restart-btn {
            margin-top: 25px; padding: 12px 40px;
            background: #ff6b00; border: 2px solid #ffd700;
            border-radius: 8px; color: #fff; font-size: 22px; cursor: pointer;
            transition: all 0.2s;
        }
        #restart-btn:hover {
            background: #ff4500; transform: scale(1.05);
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.6);
        }
    </style>
</head>
<body>
    <div id="game-container">
        <!-- æ°›å›´å…ƒç´  -->
        <div class="pumpkin" id="pumpkin1"></div>
        <div class="pumpkin" id="pumpkin2"></div>
        <div class="bat" id="bat1"></div>
        <div class="bat" id="bat2"></div>
        <div class="bat" id="bat3"></div>
 
        <!-- æ ¸å¿ƒæ¸¸æˆå…ƒç´  -->
        <div id="egg"></div>
        <div id="saw-butcher"><div id="saw-blade"></div></div>
        <div id="exit-door"></div>
 
        <!-- æ“ä½œæŒ‰é”® -->
        <div id="controls">
            <button class="btn" id="up">â†‘</button>
            <button class="btn" id="left">â†</button>
            <button class="btn" id="down">â†“</button>
            <button class="btn" id="right">â†’</button>
        </div>
 
        <!-- å†æ¥ä¸€æ¬¡å¼¹çª— -->
        <div id="restart-popup">
            <div id="popup-text">å†æ¥ä¸€æ¬¡ï¼Ÿ</div>
            <button id="restart-btn">å†æ¥ä¸€å±€</button>
        </div>
    </div>
    <script>
        // ç­‰å¾…é¡µé¢å®Œå…¨åŠ è½½ï¼ˆæ›¿ä»£DOMContentLoadedï¼Œå…¼å®¹æ€§æ›´å¥½ï¼‰
        window.onload = function() {
            // å¼ºåˆ¶è·å–DOMå…ƒç´ ï¼ˆç¡®ä¿å…ƒç´ å·²æ¸²æŸ“ï¼‰
            const egg = document.getElementById("egg");
            const butcher = document.getElementById("saw-butcher");
            const exit = document.getElementById("exit-door");
            const restartPopup = document.getElementById("restart-popup");
            const popupText = document.getElementById("popup-text");
            const restartBtn = document.getElementById("restart-btn");
            const upBtn = document.getElementById("up");
            const downBtn = document.getElementById("down");
            const leftBtn = document.getElementById("left");
            const rightBtn = document.getElementById("right");
            // éªŒè¯å…ƒç´ æ˜¯å¦è·å–æˆåŠŸï¼ˆæ§åˆ¶å°æ‰“å°ï¼Œæ–¹ä¾¿æ’æŸ¥ï¼‰
            console.log("å…ƒç´ è·å–çŠ¶æ€ï¼š", { egg, butcher, exit, restartBtn });
            if (!egg || !butcher) {
                alert("DOMå…ƒç´ è·å–å¤±è´¥ï¼Œè¯·æ£€æŸ¥IDæ˜¯å¦æ­£ç¡®ï¼");
                return;
            }
            // æ¸¸æˆçŠ¶æ€ï¼ˆå…¨å±€å˜é‡ï¼Œé¿å…ä½œç”¨åŸŸé—®é¢˜ï¼‰
            let gameState = {
                eggX: 50, 
                eggY: 520,
                butcherX: 450, 
                butcherY: 300,
                eggSpeed: 15, // è°ƒå¤§é€Ÿåº¦ï¼Œè§†è§‰æ›´æ˜æ˜¾
                butcherSpeed: 0.8, // è°ƒå¤§å± å¤«é€Ÿåº¦ï¼Œæ¸¸æˆæ›´æœ‰æŒ‘æˆ˜æ€§
                lives: 3,
                playing: true,
                gameTimer: null // å­˜å‚¨å®šæ—¶å™¨ï¼Œæ–¹ä¾¿é‡å¯
            };
            // åˆå§‹åŒ–å…ƒç´ ä½ç½®ï¼ˆå¼ºåˆ¶èµ‹å€¼ï¼Œé¿å…æ ·å¼è¦†ç›–ï¼‰
 egg.style.left = gameState.eggX + "px";
 egg.style.top = gameState.eggY + "px";
 butcher.style.left = gameState.butcherX + "px";
 butcher.style.top = gameState.butcherY + "px";
            // ç¢°æ’æ£€æµ‹ï¼ˆä¼˜åŒ–è¾¹ç•Œè®¡ç®—ï¼‰
            const isCollide = (el1, el2) => {
                const r1 = el1.getBoundingClientRect();
                const r2 = el2.getBoundingClientRect();
                // ç¼©å°ç¢°æ’èŒƒå›´ï¼Œé¿å…è¯¯åˆ¤
                const padding = 5;
                return !(
 r1.top + padding > r2.bottom - padding ||
                    r1.bottom - padding < r2.top + padding ||
                    r1.left + padding > r2.right - padding ||
                    r1.right - padding < r2.left + padding
                );
            };
            // è›‹ä»”ç§»åŠ¨ï¼ˆç‹¬ç«‹å‡½æ•°ï¼Œç¡®ä¿é€»è¾‘çº¯å‡€ï¼‰
            const moveEgg = dir => {
                if (!gameState.playing) return;
                let { eggX, eggY, eggSpeed } = gameState;
                switch(dir) {
                    case "left": eggX -= eggSpeed; break;
                    case "right": eggX += eggSpeed; break;
                    case "up": eggY -= eggSpeed; break;
                    case "down": eggY += eggSpeed; break;
                }
                // è¾¹ç•Œé™åˆ¶ï¼ˆåŸºäºgame-containerçš„å°ºå¯¸ï¼‰
                gameState.eggX = Math.max(0, Math.min(862, eggX));
                gameState.eggY = Math.max(0, Math.min(562, eggY));
 
                // æ›´æ–°è›‹ä»”ä½ç½®
 egg.style.left = gameState.eggX + "px";
 egg.style.top = gameState.eggY + "px";
            };
            // å± å¤«ç§»åŠ¨ï¼ˆä¼˜åŒ–è¿½è›‹é€»è¾‘ï¼‰
            const moveButcher = () => {
                if (!gameState.playing) return;
                let { butcherX, butcherY, eggX, eggY, butcherSpeed } = gameState;
                // è®¡ç®—æ–¹å‘å‘é‡
                const dx = eggX - butcherX;
                const dy = eggY - butcherY;
                const distance = Math.sqrt(dx * dx + dy * dy);
                // ä»…å½“è·ç¦»å¤§äºé˜ˆå€¼æ—¶ç§»åŠ¨ï¼Œé¿å…æŠ–åŠ¨
                if (distance > 10) {
                    butcherX += (dx / distance) * butcherSpeed;
                    butcherY += (dy / distance) * butcherSpeed;
                }
                // è¾¹ç•Œé™åˆ¶
                gameState.butcherX = Math.max(30, Math.min(870, butcherX));
                gameState.butcherY = Math.max(30, Math.min(560, butcherY));
 
                // æ›´æ–°å± å¤«ä½ç½®
 butcher.style.left = gameState.butcherX + "px";
 butcher.style.top = gameState.butcherY + "px";
            };
            // æ¸¸æˆæ£€æµ‹ï¼ˆç¢°æ’+èƒœè´Ÿåˆ¤æ–­ï¼‰
            const checkGame = () => {
                if (isCollide(egg, butcher)) {
                    gameState.lives--;
                    if (gameState.lives <= 0) {
                        endGame(false);
                    }
                }
                if (isCollide(egg, exit)) {
                    endGame(true);
                }
            };
            // æ¸¸æˆç»“æŸ
            const endGame = win => {
                gameState.playing = false;
                clearInterval(gameState.gameTimer); // åœæ­¢å®šæ—¶å™¨
                popupText.textContent = win ? "ğŸ‰ é€ƒç”ŸæˆåŠŸï¼å†æ¥ä¸€å±€ï¼Ÿ" : "ğŸ’€ è¢«æŠ“ä½å•¦ï¼å†æ¥ä¸€æ¬¡ï¼Ÿ";
 restartPopup.style.display = "flex";
            };
            // é‡å¯æ¸¸æˆ
            const restartGame = () => {
                // é‡ç½®çŠ¶æ€
                gameState.eggX = 50;
                gameState.eggY = 520;
                gameState.butcherX = 450;
                gameState.butcherY = 300;
                gameState.lives = 3;
                gameState.playing = true;
                // é‡ç½®ä½ç½®
 egg.style.left = gameState.eggX + "px";
 egg.style.top = gameState.eggY + "px";
 butcher.style.left = gameState.butcherX + "px";
 butcher.style.top = gameState.butcherY + "px";
                // éšè—å¼¹çª—å¹¶é‡å¯å®šæ—¶å™¨
 restartPopup.style.display = "none";
                startGameLoop();
            };
            // å¯åŠ¨æ¸¸æˆå¾ªç¯
            const startGameLoop = () => {
                gameState.gameTimer = setInterval(() => {
                    moveButcher();
                    checkGame();
                }, 16); // çº¦60å¸§ï¼Œæ›´æµç•…
            };
            // ç»‘å®šæ‰€æœ‰äº‹ä»¶ï¼ˆç›´æ¥ç»‘å®šï¼Œé¿å…äº‹ä»¶å§”æ‰˜å¤±æ•ˆï¼‰
            const bindEvents = () => {
                // æŒ‰é’®æ§åˆ¶
                upBtn.addEventListener("click", () => moveEgg("up"));
                downBtn.addEventListener("click", () => moveEgg("down"));
                leftBtn.addEventListener("click", () => moveEgg("left"));
                rightBtn.addEventListener("click", () => moveEgg("right"));
                // é”®ç›˜æ§åˆ¶
                document.addEventListener("keydown", (e) => {
                    e.preventDefault(); // é˜»æ­¢é¡µé¢æ»šåŠ¨
                    switch(e.key) {
                        case "ArrowLeft": moveEgg("left"); break;
                        case "ArrowRight": moveEgg("right"); break;
                        case "ArrowUp": moveEgg("up"); break;
                        case "ArrowDown": moveEgg("down"); break;
                    }
                });
                // é‡å¯æŒ‰é’®
                restartBtn.addEventListener("click", restartGame);
            };
            // åˆå§‹åŒ–æ¸¸æˆ
            bindEvents();
            startGameLoop();
        };
    </script>
</body>
</html>
